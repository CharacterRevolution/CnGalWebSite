@inject NavigationManager NavigationManager
@inject ToastService ToastService

<div style="display: flex; flex-direction: column; align-items: center; cursor:pointer" @onclick="OnClick">
    @switch (Type)
    {
        case ThirdPartyLoginType.Microsoft:
            <i class="fa fa-windows fa-3x"></i>
            <p class="m-0">微软</p>
            break;
        case ThirdPartyLoginType.GitHub:
            <img src="/_content/CnGalWebSite.Shared/images/Github.png" style="width:50px;height:50px;border-radius:50%" />
            <p class="m-0">Github</p>
            break;
        case ThirdPartyLoginType.Gitee:
            <div style="width: 50px; height: 50px; border-radius: 50%;  display: flex; flex-direction: column; align-items: center; justify-content: center;">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="42px" height="42px" viewBox="0 0 1024 1024" version="1.1"><path fill=" var(--main-color)" d="M512 1024C229.248 1024 0 794.752 0 512S229.248 0 512 0s512 229.248 512 512-229.248 512-512 512z m259.168-568.896h-290.752a25.28 25.28 0 0 0-25.28 25.28l-0.032 63.232c0 13.952 11.296 25.28 25.28 25.28h177.024a25.28 25.28 0 0 1 25.28 25.28v12.64a75.84 75.84 0 0 1-75.84 75.84h-240.224a25.28 25.28 0 0 1-25.28-25.28v-240.192a75.84 75.84 0 0 1 75.84-75.84h353.92a25.28 25.28 0 0 0 25.28-25.28l0.064-63.2a25.312 25.312 0 0 0-25.28-25.312H417.184a189.632 189.632 0 0 0-189.632 189.6v353.952c0 13.952 11.328 25.28 25.28 25.28h372.928a170.656 170.656 0 0 0 170.656-170.656v-145.376a25.28 25.28 0 0 0-25.28-25.28z" /></svg>
            </div>

            <p class="m-0">Gitee</p>
            break;
        case ThirdPartyLoginType.QQ:
            <div style="width: 50px; height: 50px; border-radius: 50%;">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="50px" height="50px" viewBox="0 0 1024 1024" version="1.1"><path fill="var(--main-color)" d="M824.8 613.2c-16-51.4-34.4-94.6-62.7-165.3C766.5 262.2 689.3 112 511.5 112 331.7 112 256.2 265.2 261 447.9c-28.4 70.8-46.7 113.7-62.7 165.3-34 109.5-23 154.8-14.6 155.8 18 2.2 70.1-82.4 70.1-82.4 0 49 25.2 112.9 79.8 159-26.4 8.1-85.7 29.9-71.6 53.8 11.4 19.3 196.2 12.3 249.5 6.3 53.3 6 238.1 13 249.5-6.3 14.1-23.8-45.3-45.7-71.6-53.8 54.6-46.2 79.8-110.1 79.8-159 0 0 52.1 84.6 70.1 82.4 8.5-1.1 19.5-46.4-14.5-155.8z" /></svg>            </div>
            <p class="m-0">QQ</p>
            break;
    }

</div>

@code {
    [Parameter]
    public ThirdPartyLoginType Type { get; set; }
    [Parameter]
    public EventCallback OnRedirecting { get; set; }
    [Parameter]
    public string ReturnUrl { get; set; }

    public async Task OnClick()
    {
        try
        {
            await OnRedirecting.InvokeAsync();
            NavigationManager.NavigateTo(ToolHelper.GetThirdPartyLoginUrl(ReturnUrl, Type));
        }
        catch
        {
            await ToastService.Error("导航失败", "请尝试刷新页面");
        }
    }

}
