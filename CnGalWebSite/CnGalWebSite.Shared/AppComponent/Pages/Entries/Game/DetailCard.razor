<div>
    <div class="mt-1">
        @if (Informations.Count != 0)
        {
            <div class="mb-3  pt-2">
                <CnGalWebSite.Shared.AppComponent.Normal.Titles.TitleLine Title="基本信息" />
                <div class="mt-3">
                    <CnGalWebSite.Shared.AppComponent.Pages.Entries.Normal.ListBasicInforPair Model="@Informations" />
                </div>
                <hr class="mt-3" />
            </div>
        }
        @if (WebSites.Count != 0)
        {
            <div class="mb-3  pt-2">
                <CnGalWebSite.Shared.AppComponent.Normal.Titles.TitleLine Title="相关网站" />
                <div class="mt-3">
                    <CnGalWebSite.Shared.AppComponent.Pages.Entries.Normal.Relevances.ListWebSitePair Model="@WebSites" />
                </div>
                <hr class="mt-3" />

            </div>
        }
        @if (Model.SteamId != 0)
        {
            <div class="mb-3  pt-2">
                <CnGalWebSite.Shared.AppComponent.Normal.Titles.TitleLine Title="贩售信息" Subtitle="点击可跳转至对应平台      " />
                <div class="mt-3">
                    <CnGalWebSite.Shared.AppComponent.Pages.Entries.Game.Prices.SteamInforTip EntryId="Model.Id" SteamId="Model.SteamId" EntryName="@Model.Name" />

                </div>
                <hr class="mt-3" />

            </div>
        }
        <div class="mb-3  pt-2">
            <CnGalWebSite.Shared.AppComponent.Pages.Peripheries.Cards.PeripheryOverviewCard IsShowTitle="true" EntryId="Model.Id" />
        </div>
        @if (string.IsNullOrWhiteSpace(Model.MainPage) == false)
        {
            <div class="mb-3  pt-2">
                <CnGalWebSite.Shared.AppComponent.Normal.Titles.TitleLine Title="介绍" />
                <div class="mt-3">
                    <CnGalWebSite.Shared.AppComponent.Normal.Texts.MarkdownView Text="@Model.MainPage" />
                </div>
            </div>

        }


    </div>
</div>

@code {
    [Parameter]
    public EntryIndexViewModel Model { get; set; }

    public List<CnGalWebSite.Shared.AppComponent.Pages.Entries.Normal.BasicInforPairModel> Informations { get; set; } = new List<Normal.BasicInforPairModel>();
    public List<CnGalWebSite.Shared.AppComponent.Pages.Entries.Normal.Relevances.WebSitePairModel> WebSites { get; set; } = new List<Normal.Relevances.WebSitePairModel>();

    protected override async Task OnInitializedAsync()
    {
        if (Model.Information.Any(s => s.Modifier == "基本信息"))
        {
            foreach (var item in Model.Information.Where(s => s.Modifier == "基本信息").FirstOrDefault().Informations)
            {

                if (item.DisplayName == "官网")
                {
                    var temp = new AppComponent.Pages.Entries.Normal.Relevances.WebSitePairModel
                    {
                        Name = item.DisplayName,
                        Url = item.DisplayValue,
                    };
                    WebSites.Add(temp);
                }
                else
                {
                    var temp = new AppComponent.Pages.Entries.Normal.BasicInforPairModel
                    {
                        Name = item.DisplayName,
                        Value = item.DisplayValue,
                        MultipleLines = true
                    };
                    Informations.Add(temp);

                }
            }

        }
        if (Model.Information.Any(s => s.Modifier == "相关网站"))
        {
            foreach (var item in Model.Information.Where(s => s.Modifier == "相关网站").FirstOrDefault().Informations)
            {
                var temp = new AppComponent.Pages.Entries.Normal.Relevances.WebSitePairModel
                {
                    Name = item.DisplayName,
                    Url = item.DisplayValue,
                };

                WebSites.Add(temp);
            }

        }
        if (Model.Publishers.Count>0)
        {
            var temp = "";
            foreach(var item in Model.Publishers)
            {
                temp += (item.DisplayName + ",");
            }
            Informations.Add(new Normal.BasicInforPairModel
            {
                Name = "发行商",
                Value = temp,
                IsLink = true,
                IsOutLink = false,
                MultipleLines = true
            });
        }
        if (Model.ProductionGroups.Count > 0)
        {
            var temp = "";
            foreach (var item in Model.ProductionGroups)
            {
                temp += (item.DisplayName + ",");
            }
            Informations.Add(new Normal.BasicInforPairModel
            {
                Name = "制作组",
                Value = temp,
                IsLink = true,
                IsOutLink = false,
                MultipleLines = true
            });
        }
    }
}
