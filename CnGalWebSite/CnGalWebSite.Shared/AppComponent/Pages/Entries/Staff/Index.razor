<div>
    <HeadCard Model="Model"></HeadCard>
    <PivotLine IsShowImage="@(Model.Pictures.Count!=0)" IsShowGame="@(Model.StaffGames.Count!=0)"
               OnTabClick="OnTabClick" DefaultIndex="defaultIndex" RandomIndex="randomIndex" />
    <div class="ms-3 me-3">
        <div class="mt-3 mb-3" style="padding-right: 0;padding-left: 0;">
            <div class="tab-content" id="@("pills" + randomIndex + "-tabContent")">
                <div class="@("tab-pane fade" + (defaultIndex == 0 ? " show active " : "") )" id="@("pills" + randomIndex + "-0")" role="tabpanel" aria-labelledby="@("pills" + randomIndex + "-0-tab")">
                    <DetailCard Model="@Model" />
                </div>
                <div class="@("tab-pane fade" + (defaultIndex == 1 ? " show active " : "") )" id="@("pills" + randomIndex + "-1")" role="tabpanel" aria-labelledby="@("pills" + randomIndex + "-1-tab")">
                    @if (TabIndexNum == 1)
                    {
                        <CnGalWebSite.Shared.AppComponent.Pages.Entries.Normal.ImagesCard Model="@Model" />
                    }
                </div>
                <div class="@("tab-pane fade" + (defaultIndex == 2 ? " show active " : "") )" id="@("pills" + randomIndex + "-2")" role="tabpanel" aria-labelledby="@("pills" + randomIndex + "-2-tab")">
                    <div class="mt-2">
                        <GamesCard Model="@Model" />

                    </div>
                </div>
                <div class="@("tab-pane fade" + (defaultIndex == 3 ? " show active " : "") )" id="@("pills" + randomIndex + "-3")" role="tabpanel" aria-labelledby="@("pills" + randomIndex + "-3-tab")">
                    <OtherCard Model="@Model" />
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public EntryIndexViewModel Model { get; set; }

    private int defaultIndex { get; set; } = 0;
    [Parameter]
    public string DefaultIndex
    {
        get
        {
            return defaultIndex.ToString();
        }
        set
        {
            try
            {
                defaultIndex = int.Parse(value);
            }
            catch
            {
                defaultIndex = 0;
            }
        }

    }
    public int TabIndexNum = 0;
    public int randomIndex = new Random().Next();

    public Task OnTabClick(int index)
    {

        TabIndexNum = index;
        return Task.CompletedTask;
    }
}
