@inject ToastService ToastService

<div class="@Class">

    <CnGalWebSite.Shared.MasaComponent.Shared.Components.MasaAlert Type="AlertTypes.Success" Class="mb-3">
        当你点击“完成”按钮时，将会立即发起审核请求，请在点击前确保内容正确无误
    </CnGalWebSite.Shared.MasaComponent.Shared.Components.MasaAlert>
    <div class="@(Outline?"":" rounded shadow-sm  bg-opacity rounded ps-4 pe-4 pt-3 pb-3")">
        <div>
            <BootstrapBlazor.Components.Textarea @bind-Value="@Model.Note" ShowLabel="true" DisplayText="备注" />
            <Button class="mt-3" style="width: 100px" OnClick="OnClickSubmit" IsAsync="true" Color="Color.Success" IsOutline="true" Icon="fa fa-check" Text="完成"></Button>
        </div>
    </div>
</div>


@code {
    [Parameter]
    public BaseEditModel Model { get; set; }
    [Parameter]
    public string Class { get; set; }
    [Parameter]
    public bool Outline { get; set; }
    [Parameter]
    public EventCallback<string> OnSubmit { get; set; }

    public async Task OnClickSubmit()
    {
        var result = Model.Validate();
        if (result.Successful)
        {
            await OnSubmit.InvokeAsync();
        }
        else
        {
            await ToastService.Error("某个地方填写有误哦~", result.Error ?? "某个地方填写有误哦~");
        }
    }


}
